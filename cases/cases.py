from telebot import TeleBot
from telebot.types import Message, ReplyKeyboardRemove as rmvKb, CallbackQuery
from .utils.msg import *
from bot import bot 

ADKB = ...
GET_CALC = 'calculate'
DEFAULTKB_1 = {'–°–¥–µ–ª–∞—Ç—å —Ä–∞—Å—á–µ—Ç' : GET_CALC}
SEASONS = {'–õ–µ—Ç–Ω–∏–π —Å–µ–∑–æ–Ω' : 'summer', "–ü—Ä–æ—à–ª—ã–π —Å–µ–∑–æ–Ω" : 'last_season', '–û—Ç–º–µ–Ω–∞': 'cancel'}
SKIP = '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–æ–ø—Ä–æ—Å'
SKIP_Q = {"–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–æ–ø—Ä–æ—Å" : 'skip'}
QUES3 = {'1000' : '1000', '10 000' : '10 000', '50 000' : '50 000', '100 000' : '100 000', SKIP:'skip'}
QUES4_5 = {'30%' : '30', '50%':'50', '70%':'70', '90%' : '90', SKIP:'skip'}
QUES6 = {'10%' : '10' , '30%':'30', '50%':'50', '70%':'70',SKIP:'skip'}
QUES7 = {'20%' : '20', '50%' : '50', '70%' : '50', '100%':'100', SKIP:'skip'}
MISSERR = '–í—ã –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ 3 –≤–æ–ø—Ä–æ—Å–∞. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ–≤ –Ω–µ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 2 '
MENU = {'–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é' : 'menu'}
NISHES = {'–û–¥–µ–∂–¥–∞':'clothes', '–¢–æ–≤–∞—Ä—ã': 'goods', '–í—Å–µ –Ω–∏—à–∏': 'all', '–û—Ç–º–µ–Ω–∞': 'cancel'}
CLOTHES = {'–ñ–µ–Ω—Å–∫–∞—è': 'women', '–ú—É–∂—Å–∫–∞—è': 'men', '–î–µ—Ç—Å–∫–∞—è': 'child', '–í—Å—è –æ–¥–µ–∂–¥–∞': 'all_cl', '–û—Ç–º–µ–Ω–∞': 'cancel'}

WAITTXT = '''–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã, –æ—Ç—á–µ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è.

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏ –º–∏–Ω—É—Ç—É –∏ —è –ø—Ä–∏—à–ª—é –µ–≥–æ –≤ —ç—Ç–æ—Ç —á–∞—Ç'''

txt1 = """1/7

–¢–µ–ø–µ—Ä—å, –æ–ø—Ä–µ–¥–µ–ª–∏–º –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ —Ç–æ–≤–∞—Ä–∞.
‚ùì–£–∫–∞–∂–∏ —Å—Ä–µ–¥–Ω–∏–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —á–µ–∫ —Ç–æ–≤–∞—Ä–∞ –≤ —Ä—É–±–ª—è—Ö, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã  —Ö–æ—Ç–µ–ª –±—ã –ø—Ä–æ–¥–∞–≤–∞—Ç—å

–ü—Ä–∏–º–µ—Ä: 1500"""

txt2 = """2/7

‚ùì–£–∫–∞–∂–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫ —Ç–æ–≤–∞—Ä–∞ –≤ —Ä—É–±–ª—è—Ö, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —Ö–æ—Ç–µ–ª –±—ã –ø—Ä–æ–¥–∞–≤–∞—Ç—å

–ü—Ä–∏–º–µ—Ä: 3500"""

txt3 = """3/7

‚ùì–í—ã–±–µ—Ä–∏ –ø–æ –∫–Ω–æ–ø–∫–∞–º –Ω–∏–∂–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

–û—Ç —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç —É—Ä–æ–≤–µ–Ω—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –≤ –Ω–∏—à–µ, –∫–æ—Ç–æ—Ä—É—é –ø–æ–¥–±–µ—Ä–µ—Ç –±–æ—Ç"""

txt4 = """4/7

‚ùì–í—ã–±–µ—Ä–∏  –ø–æ –∫–Ω–æ–ø–∫–∞–º –Ω–∏–∂–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π % –≤—ã–∫—É–ø–∞.

–ü–∞—Ä–∞–º–µ—Ç—Ä —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤ –Ω–∏—à–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –≤—ã–∫—É–ø–∞—é—Ç —Å –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤. –ß–µ–º –±–æ–ª—å—à–µ % –≤—ã–∫—É–ø–∞, —Ç–µ–º –º–µ–Ω—å—à–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–ª–æ–∂–µ–Ω–∏–π –¥–ª—è –∑–∞—Ö–æ–¥–∞ –≤ –Ω–∏—à—É."""

txt5 = """5/7

‚ùì –í—ã–±–µ—Ä–∏ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ % —Ç–æ–≤–∞—Ä–∞ —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏.

–ü–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–¥–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç —Ç–æ–≤–∞—Ä–æ–≤ –≤ –Ω–∏—à–µ, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –ø—Ä–æ–¥–∞–∂–∏ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü"""

txt6 = """6/7

‚ùì –í—ã–±–µ—Ä–∏ –ø–æ –∫–Ω–æ–ø–∫–∞–º –Ω–∏–∂–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π % —É–ø—É—â–µ–Ω–Ω–æ–π –≤—ã—Ä—É—á–∫–∏.

–≠—Ç–æ –≤—ã—Ä—É—á–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ –ø—Ä–æ–¥–∞–≤—Ü—ã –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö."""

txt7 = """7/7

‚ùì–í—ã–±–µ—Ä–∏ –ø–æ –∫–Ω–æ–ø–∫–∞–º –Ω–∏–∂–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π % –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏

–ü–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –æ—Ç –æ—Å—Ç–∞—Ç–∫–∞ –±—É–¥–µ—Ç –ø—Ä–æ–¥–∞–Ω–æ –∑–∞ –º–µ—Å—è—Ü.

100%: –≤–µ—Å—å —Ç–æ–≤–∞—Ä –≤ –Ω–∏—à–µ –ø—Ä–æ–¥–∞–µ—Ç—Å—è –∑–∞ –º–µ—Å—è—Ü
70%: –≤–µ—Å—å —Ç–æ–≤–∞—Ä –≤ –Ω–∏—à–µ –ø—Ä–æ–¥–∞–µ—Ç—Å—è –∑–∞ 1,4 –º–µ—Å—è—Ü–∞
50%: –≤–µ—Å—å —Ç–æ–≤–∞—Ä –≤ –Ω–∏—à–µ –ø—Ä–æ–¥–∞–µ—Ç—Å—è –∑–∞ 2 –º–µ—Å—è—Ü–∞
20%: –≤–µ—Å—å —Ç–æ–≤–∞—Ä –≤ –Ω–∏—à–µ –ø—Ä–æ–¥–∞–µ—Ç—Å—è –∑–∞ 5 –º–µ—Å—è—Ü–µ–≤"""

maketxt = """‚ö†Ô∏è–ß—Ç–æ–±—ã –±–æ—Ç –ø–æ–¥–æ–±—Ä–∞–ª –Ω–∏—à–∏ –¥–ª—è –≤—ã—Ö–æ–¥–∞ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å,
—Ç–µ–±–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–±–æ—Ä–∫–∏.

–í—Å–µ–≥–æ 7 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ß—Ç–æ–±—ã —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä–∫—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å –º–∏–Ω–∏–º—É–º 5.

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –±–æ—Ç–∞ –∏ –≤ –∫–æ–Ω—Ü–µ –ø–æ–ª—É—á–∏—à—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–¥–±–æ—Ä–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ –∏–∑ 100 –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ç–µ–±–µ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ Wildberries.

üëâüèª –ñ–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å"""

seasontxt = """‚ùì–î–ª—è –Ω–∞—á–∞–ª–∞, –≤—ã–±–µ—Ä–∏ —Å–µ–∑–æ–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

–ü–∞—Ä–∞–º–µ—Ç—Ä –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, –∫–∞–∫–æ–π —Å–µ–∑–æ–Ω –±—É–¥–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è.
–ï—Å–ª–∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—à—å —Å–µ–∑–æ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã - –∂–º–∏ —Å–µ–∑–æ–Ω.
–ï—Å–ª–∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—à—å —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞ - –∂–º–∏ –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü"""

nichestxt = """‚ùì–ö–∞–∫—É—é –Ω–∏—à—É –±—É–¥–µ–º —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å ?

–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –±–æ—Ç–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ  —Ç–æ–≤–∞—Ä—ã –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –ø–æ –≤—Å–µ–º –Ω–∏—à–∞–º —Å—Ä–∞–∑—É."""

categorytxt = '‚ÑπÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –æ–¥–µ–∂–¥—ã.'


def create_ask(log, bot: TeleBot, tid: str|int):
  
    wait_msg(log, bot, tid, qs2, txt1, get_ikb(log, SKIP_Q))

#@bot.callback_query_handler(func=lambda call: True)
def qs2(log, bot:TeleBot, tid, data, msg: Message|None):
   # global cid2
    # cid2 = call.message.id
    # uid = call.from_user.id
    # unid = call.from_user.username
    # mid = call.message.message_id

    # data = call.data 
    msg = msg.text

    if msg:
        if msg.isdigit():
            #save_ans
            qs2 = wait_msg(log, bot, tid, qs3, txt2, get_ikb(log, QUES3))
            
        
    elif data:
        #save_ans
        qs3(log, bot, tid)
    

#@bot.callback_query_handler(func=lambda call: True)
def qs3(log, bot:TeleBot, call: CallbackQuery, data, tid, msg: Message|None):
    #global cid3
    cid3 = call.message.id
    uid = call.from_user.id
    unid = call.from_user.username
    mid = call.message.message_id

    data = call.data 
    msg = msg.text
    if msg:
        if msg.isdigit():
            #save_ans
            qs3 = wait_msg(log, bot, tid, qs4, txt3, get_ikb(log, QUES4_5))
           
    elif data:
        #save_ans
        pass 


#@bot.callback_query_handler(func=lambda call: True)
def qs4(log, bot:TeleBot, call: CallbackQuery|None, tid, msg: Message|None):
    data = call.data 
    msg = msg.text 

    if msg:    
        if msg.isdigit():
            #save_ans
            qs4 = wait_msg(log, bot, tid, qs5, txt4, get_ikb(log, QUES4_5))
            
    elif data:
        #save_ans
        send_msg(log, bot, tid, txt4, get_ikb(log, QUES4_5))


#@bot.callback_query_handler(func=lambda call: True)
def qs5(log, bot:TeleBot, call: CallbackQuery|None, tid, msg: Message|None):
    data = call.data 

    if msg:    
        qs5 = wait_msg(log, bot, tid, qs6, txt5, get_ikb(log, QUES4_5))
        
    elif data:
        send_msg(log, bot, tid, txt6, get_ikb(log, QUES6))


#@bot.callback_query_handler(func=lambda call:True)
def qs6(log, bot:TeleBot, call: CallbackQuery, tid, msg: Message|None):
    data = call.data 
    if msg:
        qs6 = wait_msg(log, bot, tid, qs7, txt6, get_ikb(log, QUES6))
        
    elif data:
        pass

    if msg:
        qs7 = wait_msg(log, bot, tid, make_res, txt7, get_ikb(log, QUES7))
        
    elif data:
        pass 


def qs7(log, bot:TeleBot, call: CallbackQuery|None, tid, msg:Message|None=None):
    data = call.data 
    #save_ans
    send_msg(log, bot, tid, WAITTXT)

        

def make_res(log, bot:TeleBot, tid:str|int):
    pass



